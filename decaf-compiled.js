(function(){var A,G,H,I,t,J,K,L,u,f,v,a,m,B,M,C,w,N,x,b,k,y,D,l,E,r,O,z,e,q,F;f=document.getElementById("c");a=f.getContext("2d");u=$("<audio></audio>").attr({loop:"loop"}).append($("<source><source>").attr({src:"media/tonight_full.ogg"})).appendTo("body")[0];if(!a)throw"Loading context failed";r=function(b,h){return Math.floor(Math.random()*(h-b+1))+b};w=function(b,h){return setInterval(h,b)};e=b=void 0;x=!0;l={x:250,y:200,leftDown:!1,rightDown:!1};q=void 0;k={title:"Title",gameover:"GameOver",playing:"Playing",
paused:"Paused",crashed:"Crashed"};m=k.title;A=function(){function b(h,a,g,d,c){this.x=h;this.y=a;this.speed=g;this.cooldown=d;this.owner=c}b.prototype.move=function(){return this.y+=this.speed};b.prototype.explode=function(){var h;return this.owner.shrapnals=this.owner.shrapnals.concat(function(){var b;b=[];for(h=0;h<=9;h++)b.push(new K(this.x,this.y,h*36*Math.PI/180,10,this.owner));return b}.call(this))};b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-2,this.y-
2,4,4)};b.prototype.update=function(){this.cooldown-=1;this.cooldown<=0&&this.explode();this.move();return this.draw()};return b}();G=function(){function c(b,a){this.x=b;this.y=a;this.bombCooldown=this.angle=0;this.turnVel=(Math.random()-0.5)/30}c.prototype.move=function(){this.x+=2*Math.cos(this.angle+Math.PI/2);this.y+=2*Math.sin(this.angle+Math.PI/2);this.angle+=this.turnVel;return this.goneOnScreen=0};c.prototype.draw=function(){a.translate(this.x,this.y);a.rotate(this.angle);a.beginPath();a.moveTo(0,
14);a.lineTo(5,0);a.lineTo(0,-14);a.lineTo(-5,0);a.closePath();a.stroke();a.rotate(-this.angle);return a.translate(-this.x,-this.y)};c.prototype.bomb=function(){this.bombCooldown=40;return b.owners.enemies.bombs.push(new A(this.x,this.y,4,35,b.owners.enemies))};c.prototype.update=function(){this.bombCooldown===0&&this.bomb();this.bombCooldown-=1;this.move();return this.draw()};c.prototype.alive=function(){var h,a,c,d;if(this.x<0||this.x>f.width||this.y<0||this.y>f.height){if(this.goneOnScreen)return!1}else this.goneOnScreen=
1;if(Math.abs(e.x-this.x)<25&&Math.abs(e.y-this.y)<34)return b.owners.player.health-=24,b.owners.player.kills+=1,b.timers.dispHealth=255,!1;d=b.owners.player.lasers;a=0;for(c=d.length;a<c;a++)if(h=d[a],Math.abs(this.x-h.x)<=5&&Math.abs(this.y-h.y+h.speed/2)<=(Math.abs(h.speed)+16)/2+14)return h.killedSomething=!0,b.owners.player.kills+=1,!1;d=b.owners.player.bombs;a=0;for(c=d.length;a<c;a++)if(h=d[a],Math.abs(h.x-this.x)<7&&Math.abs(h.y-this.y)<16)return h.cooldown=0,b.owners.player.kills+=1,!1;d=
b.owners.player.shrapnals;a=0;for(c=d.length;a<c;a++)if(h=d[a],Math.abs(h.x-this.x)<6&&Math.abs(h.y-this.y)<15)return b.owners.player.kills+=1,!1;return!0};return c}();H=function(){function c(b,a){this.x=b;this.y=a;this.shootCooldown=0}c.prototype.draw=function(){a.strokeStyle="#FFFFFF";a.beginPath();a.moveTo(this.x-10,this.y-10);a.lineTo(this.x+10,this.y-10);a.lineTo(this.x,this.y+10);a.closePath();return a.stroke()};c.prototype.move=function(){var b;this.y+=3;b=(e.x-this.x)/12;return this.x+=Math.abs(b)<
5?b:5*b/Math.abs(b)};c.prototype.shoot=function(){this.shootCooldown=35;return b.owners.enemies.lasers.push(new t(this.x,this.y,20,b.owners.enemies))};c.prototype.alive=function(){var a,j,c,d;if(this.y>f.height)return!1;if(Math.abs(e.x-this.x)<30&&Math.abs(e.y-this.y)<30)return b.owners.player.health-=24,b.owners.player.kills+=1,b.timers.dispHealth=255,!1;d=b.owners.player.lasers;j=0;for(c=d.length;j<c;j++)if(a=d[j],Math.abs(this.x-a.x)<=10&&Math.abs(this.y-a.y+a.speed/2)<=(Math.abs(a.speed)+16)/
2+10)return a.killedSomething=!0,b.owners.player.kills+=1,!1;d=b.owners.player.bombs;j=0;for(c=d.length;j<c;j++)if(a=d[j],Math.abs(a.x-this.x)<12&&Math.abs(a.y-this.y)<12)return a.cooldown=0,b.owners.player.kills+=1,!1;d=b.owners.player.shrapnals;j=0;for(c=d.length;j<c;j++)if(a=d[j],Math.abs(a.x-this.x)<11&&Math.abs(a.y-this.y)<11)return b.owners.player.kills+=1,!1;return!0};c.prototype.update=function(){this.shootCooldown===0&&this.shoot();this.shootCooldown-=1;this.move();return this.draw()};return c}();
I=function(){function c(a,b){this.x=a;this.y=b;this.moveState=this.shootCooldown=this.angle=0}c.prototype.move=function(){var a;switch(this.moveState){case 0:return Math.abs(this.x-e.x)<150&&Math.abs(this.y-e.y)<150?this.moveState=1:(this.angle=0,this.y+=1);case 1:return a=this.y>e.y?Math.PI-Math.atan((this.x-e.x)/(this.y-e.y)):-Math.atan((this.x-e.x)/(this.y-e.y)),Math.abs(a-this.angle)<Math.PI/24||Math.abs(a-this.angle)>Math.PI*2-Math.PI/24?(this.angle=a,this.moveState=2):this.angle<a&&this.angle-
a<Math.PI||Math.PI*2-this.angle-a<Math.PI?this.angle+=Math.PI/24:this.angle-=Math.PI/24;case 2:return this.x+=30*Math.cos(this.angle+Math.PI/2),this.y+=30*Math.sin(this.angle+Math.PI/2)}};c.prototype.draw=function(){a.translate(this.x,this.y);a.rotate(this.angle);a.beginPath();a.moveTo(-10,-10);a.lineTo(10,-10);a.lineTo(10,4);a.lineTo(0,10);a.lineTo(-10,4);a.closePath();a.stroke();a.rotate(-this.angle);return a.translate(-this.x,-this.y)};c.prototype.alive=function(){var a,c,g,d;if(this.y>f.height||
this.moveState&&(this.x<0||this.x>f.width||this.y<0||this.y>f.height))return!1;if(Math.abs(e.x-this.x)<30&&Math.abs(e.y-this.y)<30)return b.owners.player.kills+=1,b.owners.player.health-=35,b.timers.dispHealth=255,!1;d=b.owners.player.lasers;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(this.x-a.x)<=10&&Math.abs(this.y-a.y+a.speed/2)<=(Math.abs(a.speed)+16)/2+10)return a.killedSomething=!0,b.owners.player.kills+=1,!1;d=b.owners.player.bombs;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(a.x-this.x)<
12&&Math.abs(a.y-this.y)<12)return a.cooldown=0,b.owners.player.kills+=1,!1;d=b.owners.player.shrapnals;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(a.x-this.x)<11&&Math.abs(a.y-this.y)<11)return b.owners.player.kills+=1,!1;return!0};c.prototype.update=function(){this.move();return this.draw()};return c}();t=function(){function b(a,c,e,d){this.x=a;this.y=c;this.speed=e;this.owner=d;this.killedSomething=!1}b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-1,this.y-
8,2,16)};b.prototype.move=function(){return this.y+=this.speed};b.prototype.update=function(){this.move();return this.draw()};return b}();J=function(){function c(a,b){this.x=a;this.y=b;this.heat=this.bombCooldown=this.laserCooldown=0}c.prototype.move=function(){this.x=(this.x+l.x)/2;return this.y=(this.y+l.y)/2};c.prototype.draw=function(){a.strokeStyle="#FFFFFF";a.beginPath();a.moveTo(this.x,this.y-20);a.quadraticCurveTo(this.x+20,this.y,this.x+20,this.y+20);a.quadraticCurveTo(this.x+5,this.y+10,
this.x,this.y+10);a.quadraticCurveTo(this.x-5,this.y+10,this.x-20,this.y+20);a.quadraticCurveTo(this.x-20,this.y,this.x,this.y-20);a.closePath();return a.stroke()};c.prototype.takeDamage=function(){var a,c,e,d,f;d=b.owners.enemies.lasers;c=0;for(e=d.length;c<e;c++)if(a=d[c],Math.abs(this.x-a.x)<=20&&Math.abs(this.y-a.y+a.speed/2)<=(Math.abs(a.speed)+16)/2+20)a.killedSomething=!0,b.owners.player.health-=8,b.timers.dispHealth=255;d=b.owners.enemies.bombs;c=0;for(e=d.length;c<e;c++)if(a=d[c],Math.abs(a.x-
this.x)<22&&Math.abs(a.y-this.y)<22)a.cooldown=0,b.owners.player.health-=2,b.timers.dispHealth=255;d=b.owners.enemies.shrapnals;f=[];c=0;for(e=d.length;c<e;c++)a=d[c],f.push(Math.abs(a.x-this.x)<21&&Math.abs(a.y-this.y)<21?(a.cooldown=0,b.owners.player.health-=2,b.timers.dispHealth=255):void 0);return f};c.prototype.update=function(){this.move();return this.draw()};return c}();K=function(){function b(a,c,e,d,f){this.x=a;this.y=c;this.angle=e;this.speed=d;this.owner=f;this.cooldown=10}b.prototype.move=
function(){this.x+=this.speed*Math.cos(this.angle);return this.y+=this.speed*Math.sin(this.angle)};b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-1,this.y-1,2,2)};b.prototype.update=function(){this.cooldown-=1;this.move();return this.draw()};return b}();L=function(){function c(a,b){this.x=a;this.y=b;this.burst=this.shootCooldown=this.angle=0}c.prototype.draw=function(){a.translate(this.x,this.y);a.rotate(this.angle);a.beginPath();a.moveTo(-10,-10);a.lineTo(10,-10);
a.lineTo(10,10);a.lineTo(-10,10);a.closePath();a.stroke();a.rotate(-this.angle);return a.translate(-this.x,-this.y)};c.prototype.move=function(){this.angle+=0.1;return this.y+=2};c.prototype.shoot=function(){this.burst<5?this.burst+=1:(this.shootCooldown=55,this.burst=0);return b.owners.enemies.lasers.push(new t(this.x,this.y,20,b.owners.enemies))};c.prototype.alive=function(){var a,c,g,d;if(this.y>f.height)return!1;if(Math.abs(e.x-this.x)<30&&Math.abs(e.y-this.y)<30)return b.owners.player.health-=
24,b.owners.player.kills+=1,b.timers.dispHealth=255,!1;d=b.owners.player.lasers;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(this.x-a.x)<=10&&Math.abs(this.y-a.y+a.speed/2)<=(Math.abs(a.speed)+16)/2+10)return a.killedSomething=!0,b.owners.player.kills+=1,!1;d=b.owners.player.bombs;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(a.x-this.x)<12&&Math.abs(a.y-this.y)<12)return a.cooldown=0,b.owners.player.kills+=1,!1;d=b.owners.player.shrapnals;c=0;for(g=d.length;c<g;c++)if(a=d[c],Math.abs(a.x-this.x)<
11&&Math.abs(a.y-this.y)<11)return b.owners.player.kills+=1,!1;return!0};c.prototype.update=function(){this.shootCooldown<=0&&this.shoot();this.shootCooldown-=1;this.move();return this.draw()};return c}();z=function(){a.fillStyle="#FFFFFF";a.font="bold 20px Lucidia Console";a.textAlign="center";return a.textBaseline="middle"};O=function(){a.fillStyle="#FFFFFF";a.font="normal 18px Lucidia Console";a.textAlign="left";return a.textBaseline="bottom"};v=function(){a.fillStyle="#000000";return a.fillRect(0,
0,f.width,f.height)};C=function(){v();z();a.fillText("Tempus [Dev]",f.width/2,f.height/2-12);a.fillText("Click to play",f.width/2,f.height/2+12);O();return a.fillText("by Jake Stothard",10,f.height-10)};M=function(){v();z();a.fillText("Game Over",f.width/2,f.height/2-20);a.font="normal 18px Lucidia Console";a.fillText("Kills - "+b.owners.player.kills,f.width/2,f.height/2);a.fillText("Lasers Fired - "+b.owners.player.lasers_fired,f.width/2,f.height/2+20);return a.fillText("Bombs Used - "+b.owners.player.bombs_fired,
f.width/2,f.height/2+40)};a.strokeStyle="#FFFFFF";a.lineWidth=4;N=function(){$("#enableMusic")[0].checked&&u.play();return x=!1};D=function(){x&&N();e=new J(l.x,l.y);return b={owners:{player:{lasers:[],bombs:[],shrapnals:[],units:e,color:"#0044FF",health:100,kills:0,lasers_fired:0,bombs_fired:0},enemies:{lasers:[],bombs:[],shrapnals:[],units:[],color:"#FF0000"}},timers:{dispHealth:0,colorCycle:0,colorCycleDir:10},crashed:!1}};B=function(){a.beginPath();a.arc(f.width/2,f.height/2,Math.min(f.width,
f.height)/2-20,0,Math.max(b.owners.player.health,0)*Math.PI/50,!1);return a.stroke()};E=function(){m=k.paused;clearInterval(q);B();z();return a.fillText("[Paused]",f.width/2,f.height/2)};F=function(){m=k.playing;return q=w(32,y)};$(document).keyup(function(){switch(event.which){case 80:switch(m){case k.paused:return F();case k.playing:return E()}}});$("#c").mousemove(function(a){l.x=a.pageX-this.offsetLeft;return l.y=a.pageY-this.offsetTop}).mouseout(function(){if(m===k.playing)return E()}).mousedown(function(a){switch(a.which){case 1:return l.leftDown=
!0;case 3:return l.rightDown=!0}}).mouseup(function(a){switch(a.which){case 1:return l.leftDown=!1;case 3:return l.rightDown=!1}}).click(function(){switch(m){case k.paused:return F();case k.title:return m=k.playing,D(),q=w(32,y);case k.gameOver:return m=k.title,C()}}).bind("contextmenu",function(){return!1});$("#enableMusic").change(function(){if(!x)return $("#enableMusic")[0].checked?(u.play(),!0):(u.pause(),!1)});y=function(){var c,h,j,g,d,s,i,p,n,o;if(b.crashed)m=k.crashed,clearInterval(q);else{b.crashed=
!0;b.timers.colorCycle+=b.timers.colorCycleDir;b.timers.colorCycle=Math.min(b.timers.colorCycle,255);b.timers.colorCycle=Math.max(b.timers.colorCycle,0);if(b.timers.colorCycle===0||b.timers.colorCycle===255)b.timers.colorCycleDir*=-1;if(b.owners.player.health<=0)m=k.gameOver,clearInterval(q),M();else{v();n=b.owners.enemies.units;i=0;for(p=n.length;i<p;i++)h=n[i],h.update();b.owners.enemies.units=function(){var a,c,d,e;d=b.owners.enemies.units;e=[];a=0;for(c=d.length;a<c;a++)h=d[a],h.alive()&&e.push(h);
return e}();Math.random()<0.03&&b.owners.player.kills>=0&&b.owners.enemies.units.push(new H(r(0,f.width),-10));Math.random()<0.02&&b.owners.player.kills>=15&&b.owners.enemies.units.push(new I(r(0,f.width),-10));Math.random()<0.01&&b.owners.player.kills>=30&&b.owners.enemies.units.push(new G(r(0,f.width),-10));Math.random()<0.005&&b.owners.player.kills>=45&&b.owners.enemies.units.push(new L(r(0,f.width),-10));e.update();n=b.owners;for(d in n){g=n[d];o=g.lasers;i=0;for(p=o.length;i<p;i++)j=o[i],j.update()}e.takeDamage();
i=b.owners;for(d in i)g=i[d],g.lasers=function(){var a,b,c,d,e;c=g.lasers;e=[];a=0;for(b=c.length;a<b;a++)j=c[a],0<(d=j.y)&&d<f.height&&!j.killedSomething&&e.push(j);return e}();n=b.owners;for(d in n){g=n[d];o=g.bombs;i=0;for(p=o.length;i<p;i++)c=o[i],c.update()}i=b.owners;for(d in i)g=i[d],g.bombs=function(){var a,b,d,e;d=g.bombs;e=[];a=0;for(b=d.length;a<b;a++)c=d[a],c.cooldown>0&&e.push(c);return e}();n=b.owners;for(d in n){g=n[d];o=g.shrapnals;i=0;for(p=o.length;i<p;i++)s=o[i],s.update()}i=b.owners;
for(d in i)g=i[d],g.shrapnals=function(){var a,b,c,d;c=g.shrapnals;d=[];b=0;for(a=c.length;b<a;b++)s=c[b],s.cooldown>0&&d.push(s);return d}();if(l.leftDown&&e.laserCooldown<=0)b.owners.player.lasers_fired+=1,b.owners.player.lasers.push(new t(e.x,e.y,-20,b.owners.player)),e.laserCooldown=e.heat>80?7:e.heat>40?5:2,e.heat+=7;if(l.rightDown&&e.bombCooldown<=0)b.owners.player.bombs_fired+=1,m===k.playing&&b.owners.player.bombs.push(new A(e.x,e.y,-12,20,b.owners.player)),e.bombCooldown=e.heat>80?20:e.heat>
40?10:5,e.heat+=10;e.laserCooldown>0&&(e.laserCooldown-=1);e.bombCooldown>0&&(e.bombCooldown-=1);e.heat>0&&(e.heat-=1);a.textAlign="center";a.textBaseline="bottom";e.heat>80?(a.fillStyle="rgb(".concat(b.timers.colorCycle,",0,0)"),a.font="bold 20px Lucidia Console",a.fillText("[ Heat Critical ]",f.width/2,f.height-30)):e.heat>40?(a.fillStyle="rgb(".concat(b.timers.colorCycle,",",b.timers.colorCycle,",0)"),a.font="normal 18px Lucidia Console",a.fillText("[ Heat Warning ]",f.width/2,f.height-30)):a.fillStyle=
"#00FF00";if(b.timers.dispHealth>0)a.strokeStyle="rgb(".concat(b.timers.dispHealth,",",b.timers.dispHealth,",",b.timers.dispHealth,")"),B(),a.strokeStyle="#FFFFFF",b.timers.dispHealth-=10;return b.crashed=!1}}};switch(m){case k.playing:D();q=w(32,y);break;case k.title:C()}}).call(this);
