(function(){var C,D,E,x,F,G,i,r,a,n,H,y,s,c,j,t,z,u,v,A,B,w,g,p;i=document.getElementById("c");a=i.getContext("2d");if(!a)throw"Loading context failed";A=function(a,e){return Math.floor(Math.random()*(e-a+1))+a};s=function(a,e){return setInterval(e,a)};c={};u=250;v=200;p=void 0;j={title:"Title",gameover:"GameOver",playing:"Playing",paused:"Paused",crashed:"Crashed"};n=j.title;F=function(){function c(e,a){this.x=e;this.y=a}c.prototype.move=function(){this.x=(this.x+u)/2;return this.y=(this.y+v)/2};
c.prototype.draw=function(){a.strokeStyle="#FFFFFF";a.beginPath();a.moveTo(this.x,this.y-20);a.quadraticCurveTo(this.x+20,this.y,this.x+20,this.y+20);a.quadraticCurveTo(this.x+5,this.y+10,this.x,this.y+10);a.quadraticCurveTo(this.x-5,this.y+10,this.x-20,this.y+20);a.quadraticCurveTo(this.x-20,this.y,this.x,this.y-20);a.closePath();return a.stroke()};c.prototype.update=function(){this.move();return this.draw()};return c}();D=function(){function b(e,a){this.x=e;this.y=a;this.shootCooldown=0}b.prototype.draw=
function(){a.strokeStyle="#FFFFFF";a.beginPath();a.moveTo(this.x-10,this.y-10);a.lineTo(this.x+10,this.y-10);a.lineTo(this.x,this.y+10);a.closePath();return a.stroke()};b.prototype.move=function(){var e;this.y+=3;e=(g.x-this.x)/12;return this.x+=Math.abs(e)<5?e:5*e/Math.abs(e)};b.prototype.shoot=function(){this.shootCooldown=35;return c.owners.enemies.lasers.push(new x(this.x,this.y,20,c.owners.enemies))};b.prototype.alive=function(){var e,a,b,d;if(this.y>i.height)return!1;if(Math.abs(g.x-this.x)<
35&&Math.abs(g.y-this.y)<35)return c.owners.player.health-=24,c.owners.player.kills+=1,!1;d=c.owners.player.lasers;a=0;for(b=d.length;a<b;a++)if(e=d[a],Math.abs(this.x-e.x)<=12&&Math.abs(this.y-e.y+e.speed/2)<=(Math.abs(e.speed)+16)/2+10)return e.killedSomething=!0,c.owners.player.kills+=1,!1;d=c.owners.player.bombs;a=0;for(b=d.length;a<b;a++)if(e=d[a],Math.abs(this.x-e.x)<=12&&Math.abs(this.y-e.y+e.speed/2)<=Math.abs(e.speed)/2+12)return e.cooldown=0,c.owners.player.kills+=1,!1;d=c.owners.player.shrapnals;
a=0;for(b=d.length;a<b;a++)if(e=d[a],Math.abs(this.x-e.x)<=11&&Math.abs(this.y-e.y)<=11)return c.owners.player.kills+=1,!1;return!0};b.prototype.update=function(){this.shootCooldown===0&&this.shoot();this.shootCooldown-=1;this.move();return this.draw()};return b}();E=function(){function b(a,c){this.x=a;this.y=c;this.moveState=this.shootCooldown=this.angle=0}b.prototype.move=function(){var a;switch(this.moveState){case 0:return Math.abs(this.x-g.x)<150&&Math.abs(this.y-g.y)<150?this.moveState=1:(this.angle=
0,this.y+=1);case 1:return a=this.y>g.y?Math.PI-Math.atan((this.x-g.x)/(this.y-g.y)):-Math.atan((this.x-g.x)/(this.y-g.y)),Math.abs(a-this.angle)<Math.PI/24||Math.abs(a-this.angle)>Math.PI*2-Math.PI/24?(this.angle=a,this.moveState=2):this.angle<a&&this.angle-a<Math.PI||Math.PI*2-this.angle-a<Math.PI?this.angle+=Math.PI/24:this.angle-=Math.PI/24;case 2:return this.x+=30*Math.cos(this.angle+Math.PI/2),this.y+=30*Math.sin(this.angle+Math.PI/2)}};b.prototype.draw=function(){a.translate(this.x,this.y);
a.rotate(this.angle);a.beginPath();a.moveTo(-10,-10);a.lineTo(10,-10);a.lineTo(10,4);a.lineTo(0,10);a.lineTo(-10,4);a.closePath();a.stroke();a.rotate(-this.angle);return a.translate(-this.x,-this.y)};b.prototype.alive=function(){var a,b,h,d;if(this.y>i.height||this.moveState&&(this.x<0||this.x>i.width||this.y<0))return!1;if(Math.abs(g.x-this.x)<35&&Math.abs(g.y-this.y)<35)return c.owners.player.kills+=1,c.owners.player.health-=35,!1;d=c.owners.player.lasers;b=0;for(h=d.length;b<h;b++)if(a=d[b],Math.abs(this.x-
a.x)<=12&&Math.abs(this.y-a.y+a.speed/2)<=(Math.abs(a.speed)+16)/2+10)return a.killedSomething=!0,c.owners.player.kills+=1,!1;d=c.owners.player.bombs;b=0;for(h=d.length;b<h;b++)if(a=d[b],Math.abs(this.x-a.x)<=12&&Math.abs(this.y-a.y+a.speed/2)<=Math.abs(a.speed)/2+12)return a.cooldown=0,c.owners.player.kills+=1,!1;d=c.owners.player.shrapnals;b=0;for(h=d.length;b<h;b++)if(a=d[b],Math.abs(this.x-a.x)<=11&&Math.abs(this.y-a.y)<=11)return c.owners.player.kills+=1,!1;return!0};b.prototype.update=function(){this.move();
return this.draw()};return b}();x=function(){function b(a,b,c,d){this.x=a;this.y=b;this.speed=c;this.owner=d;this.killedSomething=!1}b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-1,this.y-8,2,16)};b.prototype.move=function(){return this.y+=this.speed};b.prototype.update=function(){this.move();return this.draw()};return b}();G=function(){function b(a,b,c,d,g){this.x=a;this.y=b;this.angle=c;this.speed=d;this.owner=g;this.cooldown=10}b.prototype.move=function(){this.x+=
this.speed*Math.cos(this.angle);return this.y+=this.speed*Math.sin(this.angle)};b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-1,this.y-1,2,2)};b.prototype.update=function(){this.cooldown-=1;this.move();return this.draw()};return b}();C=function(){function b(a,b,c,d){this.x=a;this.y=b;this.speed=c;this.owner=d;this.cooldown=20}b.prototype.move=function(){return this.y+=this.speed};b.prototype.explode=function(){var a;return this.owner.shrapnals=this.owner.shrapnals.concat(function(){var b;
b=[];for(a=0;a<=9;a++)b.push(new G(this.x,this.y,a*36*Math.PI/180,this.speed,this.owner));return b}.call(this))};b.prototype.draw=function(){a.fillStyle=this.owner.color;return a.fillRect(this.x-2,this.y-2,4,4)};b.prototype.update=function(){this.cooldown-=1;this.cooldown<=0&&this.explode();this.move();return this.draw()};return b}();w=function(){a.fillStyle="#FFFFFF";a.font="bold 20px Lucidia Console";a.textAlign="center";return a.textBaseline="middle"};B=function(){a.fillStyle="#FFFFFF";a.font=
"normal 18px Lucidia Console";a.textAlign="left";return a.textBaseline="bottom"};r=function(){a.fillStyle="#000000";return a.fillRect(0,0,i.width,i.height)};y=function(){r();w();a.fillText("Tempus [Dev]",i.width/2,i.height/2-12);a.fillText("Click to play",i.width/2,i.height/2+12);B();return a.fillText("by Jake Stothard",10,i.height-10)};H=function(){r();w();return a.fillText("Game Over",i.width/2,i.height/2)};a.strokeStyle="#FFFFFF";a.lineWidth=4;g=new F(u,v);z=function(){return c={owners:{player:{lasers:[],
bombs:[],shrapnals:[],units:g,color:"#0044FF",health:100,kills:0},enemies:{lasers:[],bombs:[],shrapnals:[],units:[],color:"#FF0000"}},crashed:!1}};$(document).keyup(function(){switch(event.which){case 80:switch(n){case j.paused:return n=j.playing,p=s(32,t);case j.playing:return n=j.paused,clearInterval(p),w(),a.fillText("[Paused]",i.width/2,i.height/2)}}});$("#c").mousemove(function(a){u=a.pageX-this.offsetLeft;return v=a.pageY-this.offsetTop}).mousedown(function(){if(j.playing)return c.owners.player.lasers.push(new x(g.x,
g.y,-20,c.owners.player))}).click(function(){switch(n){case j.title:return n=j.playing,z(),p=s(32,t);case j.gameOver:return n=j.title,y()}}).bind("contextmenu",function(){n===j.playing&&c.owners.player.bombs.push(new C(g.x,g.y,-12,c.owners.player));return!1});t=function(){var b,e,l,h,d,q,f,m,k,o;if(c.crashed)n=j.crashed,clearInterval(p);else if(c.crashed=!0,c.owners.player.health<=0)n=j.gameOver,clearInterval(p),H();else{r();k=c.owners.enemies.units;f=0;for(m=k.length;f<m;f++)e=k[f],e.update();c.owners.enemies.units=
function(){var a,b,d,f;d=c.owners.enemies.units;f=[];a=0;for(b=d.length;a<b;a++)e=d[a],e.alive()&&f.push(e);return f}();Math.random()<0.05&&c.owners.enemies.units.push(new D(A(0,i.width),-10));Math.random()<0.02&&c.owners.player.kills>15&&c.owners.enemies.units.push(new E(A(0,i.width),-10));g.update();k=c.owners;for(d in k){h=k[d];o=h.lasers;f=0;for(m=o.length;f<m;f++)l=o[f],l.update()}k=c.owners.enemies.lasers;f=0;for(m=k.length;f<m;f++)if(l=k[f],Math.abs(g.x-l.x)<=12&&Math.abs(g.y-l.y+l.speed/2)<=
(Math.abs(l.speed)+16)/2+10)l.killedSomething=!0,c.owners.player.health-=8;f=c.owners;for(d in f)h=f[d],h.lasers=function(){var a,b,c,d,e;c=h.lasers;e=[];a=0;for(b=c.length;a<b;a++)l=c[a],0<(d=l.y)&&d<i.height&&!l.killedSomething&&e.push(l);return e}();k=c.owners;for(d in k){h=k[d];o=h.bombs;f=0;for(m=o.length;f<m;f++)b=o[f],b.update()}f=c.owners;for(d in f)h=f[d],h.bombs=function(){var a,c,d,e;d=h.bombs;e=[];c=0;for(a=d.length;c<a;c++)b=d[c],b.cooldown>0&&e.push(b);return e}();o=c.owners;for(d in o){h=
o[d];k=h.shrapnals;m=0;for(f=k.length;m<f;m++)q=k[m],q.update()}f=c.owners;for(d in f)h=f[d],h.shrapnals=function(){var a,b,c,d;c=h.shrapnals;d=[];b=0;for(a=c.length;b<a;b++)q=c[b],q.cooldown>0&&d.push(q);return d}();B();a.fillText("Health: "+c.owners.player.health,10,i.height-10);return c.crashed=!1}};switch(n){case j.playing:z();p=s(32,t);break;case j.title:y()}}).call(this);
