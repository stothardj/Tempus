var __t;__t=function(ns){var curr,index,part,parts,_i,_len;curr=null,parts=[].concat=ns.split(".");for(index=_i=0,_len=parts.length;_i<_len;index=++_i){part=parts[index];if(curr===null){curr=eval(part);continue}curr[part]==null?curr=curr[part]={}:curr=curr[part]}return curr},function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,ba={}.hasOwnProperty,bb=function(a,b){function d(){this.constructor=a}for(var c in b)ba.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=function(){function a(a){this.framecount=a,this.frame=0}return a.prototype.nextFrame=function(){return this.frame+=1},a.prototype.finished=function(){return this.frame>=this.framecount},a.prototype.drawFrame=function(){},a}(),A=function(a){function b(a,c,d){this.x=a,this.y=c,this.angle=d,b.__super__.constructor.call(this,5)}return bb(b,a),b.prototype.width=20,b.prototype.height=20,b.prototype.drawFrame=function(){var a;return E.strokeStyle="rgba(255,0,0,".concat(1-this.frame/this.framecount,")"),a=this.frame*2,E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(-this.width/2-a,-this.height/2-a),E.lineTo(this.width/2+a,-this.height/2-a),E.lineTo(this.width/2+a,this.height/2+a),E.lineTo(-this.width/2-a,this.height/2+a),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b}(a),i=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,5)}return bb(b,a),b.prototype.width=20,b.prototype.height=20,b.prototype.drawFrame=function(){var a;return E.strokeStyle="rgba(255,0,0,".concat(1-this.frame/this.framecount,")"),E.beginPath(),a=this.frame*2,E.moveTo(this.x-this.width/2-a,this.y-this.height/2-a),E.lineTo(this.x+this.width/2+a,this.y-this.height/2-a),E.lineTo(this.x,this.y+this.height/2+a),E.closePath(),E.stroke()},b}(a),n=function(a){function b(a,c,d){this.x=a,this.y=c,this.angle=d,b.__super__.constructor.call(this,5)}return bb(b,a),b.prototype.width=20,b.prototype.height=20,b.prototype.drawFrame=function(){var a;return E.strokeStyle="rgba(255,0,0,".concat(1-this.frame/this.framecount,")"),a=this.frame*2,E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(-this.width/2-a,-this.height/2-a),E.lineTo(this.width/2+a,-this.height/2-a),E.lineTo(this.width/2+a,this.height/5+a),E.lineTo(0,this.height/2+a),E.lineTo(-this.width/2-a,this.height/5+a),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b}(a),f=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.offscreen=function(){return this.x<0||this.x>C.width||this.y<0||this.y>C.height},a.prototype.drawAsBox=function(){return E.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a}(),e=function(a){function b(a,c,d){this.x=a,this.y=c,this.angle=d,b.__super__.constructor.call(this,5)}return bb(b,a),b.prototype.width=10,b.prototype.height=28,b.prototype.drawFrame=function(){var a;return E.strokeStyle="rgba(255,0,0,".concat(1-this.frame/this.framecount,")"),a=this.frame*2,E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(0,this.height/2+a),E.lineTo(this.width/2+a,0),E.lineTo(0,-this.height/2-a),E.lineTo(-this.width/2-a,0),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b}(a),g=function(b){function c(a,b){this.x=a,this.y=b}return bb(c,b),c.prototype.getAnimation=function(){return new a(0)},c}(f),r=function(a){function b(a,b){this.x=a,this.y=b,this.used=0}return bb(b,a),b.prototype.move=function(){return this.y+=this.speed},b.prototype.draw=function(){return E.fillStyle=this.color,this.drawAsBox()},b.prototype.detectUse=function(){this.boxHit(Y)&&(this.used=1,this.use());if(this.offscreen())return this.used=1},b.prototype.update=function(){return this.move(),this.draw(),this.detectUse()},b}(f),j="#0044FF",b="#FF0000",t=100,u=4e3,s=80,v=40,q=3,p=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return bb(b,a),b.prototype.rand=.02,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#FF9900",b.prototype.use=function(){return Y.laserPower+=1},b}(r),y=function(){function a(a,b,c,d,e){this.x=a,this.y=b,this.angle=c,this.speed=d,this.owner=e,this.cooldown=10}return a.prototype.speed=10,a.prototype.width=2,a.prototype.height=2,a.prototype.drawAsBox=function(){return E.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a.prototype.move=function(){return this.x+=this.speed*Math.cos(this.angle),this.y+=this.speed*Math.sin(this.angle)},a.prototype.draw=function(){return E.fillStyle=this.owner.color,this.drawAsBox()},a.prototype.update=function(){return this.cooldown-=1,this.move(),this.draw()},a}(),o=function(){function a(a,b,c,d){this.x=a,this.y=b,this.speed=c,this.owner=d,this.killedSomething=!1}return a.prototype.speed=20,a.prototype.width=2,a.prototype.height=16,a.prototype.drawAsBox=function(){return E.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a.prototype.draw=function(){return E.fillStyle=this.owner.color,this.drawAsBox()},a.prototype.move=function(){return this.y+=this.speed},a.prototype.update=function(){return this.move(),this.draw()},a}(),k=function(){function a(){this.owners={player:{lasers:[],bombs:[],shrapnals:[],units:Y,color:j,health:t,shield:0,kills:0,lasersFired:0,bombsFired:0},enemies:{lasers:[],bombs:[],shrapnals:[],units:[],color:b}},this.timers={dispHealth:0,colorCycle:0,colorCycleDir:10},this.powerups={healthups:[],laserups:[],shieldups:[]},this.animations=[],this.crashed=!1}return a}(),z=function(a){function b(a,b){this.x=a,this.y=b,this.angle=0,this.shootCooldown=Math.floor(Math.random()*this.cooldownTime),this.burst=0,this.health=1}return bb(b,a),b.prototype.rand=.005,b.prototype.threshold=45,b.prototype.width=20,b.prototype.height=20,b.prototype.cooldownTime=55,b.prototype.draw=function(){return E.strokeStyle="#FFFFFF",E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(-this.width/2,-this.height/2),E.lineTo(this.width/2,-this.height/2),E.lineTo(this.width/2,this.height/2),E.lineTo(-this.width/2,this.height/2),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b.prototype.move=function(){return this.angle+=.1,this.y+=2},b.prototype.shoot=function(){return this.burst<5?this.burst+=1:(this.shootCooldown=this.cooldownTime,this.burst=0),M.owners.enemies.lasers.push(new o(this.x,this.y,o.prototype.speed,M.owners.enemies))},b.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>C.height)return this.health=0;if(this.boxHit(Y))return Y.damage(24),M.owners.player.kills+=1,this.health=0;j=M.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,M.owners.player.kills+=1,this.health=0}k=M.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,M.owners.player.kills+=1,this.health=0}l=M.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return M.owners.player.kills+=1,this.health=0}},b.prototype.update=function(){return this.shootCooldown<=0&&this.shoot(),this.shootCooldown-=1,this.move(),this.draw(),this.takeDamage()},b.prototype.getAnimation=function(){return new A(this.x,this.y,this.angle)},b}(g),h=function(a){function b(a,b){this.x=a,this.y=b,this.shootCooldown=Math.floor(Math.random()*this.cooldownTime),this.health=1}return bb(b,a),b.prototype.rand=.03,b.prototype.threshold=0,b.prototype.width=20,b.prototype.height=20,b.prototype.cooldownTime=35,b.prototype.draw=function(){return E.strokeStyle="#FFFFFF",E.beginPath(),E.moveTo(this.x-this.width/2,this.y-this.height/2),E.lineTo(this.x+this.width/2,this.y-this.height/2),E.lineTo(this.x,this.y+this.height/2),E.closePath(),E.stroke()},b.prototype.move=function(){var a;return this.y+=3,a=(Y.x-this.x)/12,this.x+=Math.abs(a)<5?a:5*a/Math.abs(a)},b.prototype.shoot=function(){return this.shootCooldown=this.cooldownTime,M.owners.enemies.lasers.push(new o(this.x,this.y,o.prototype.speed,M.owners.enemies))},b.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>C.height)return this.health=0;if(this.boxHit(Y))return Y.damage(24),M.owners.player.kills+=1,this.health=0;j=M.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,M.owners.player.kills+=1,this.health=0}k=M.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,M.owners.player.kills+=1,this.health=0}l=M.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return M.owners.player.kills+=1,this.health=0}},b.prototype.update=function(){return this.shootCooldown===0&&this.shoot(),this.shootCooldown-=1,this.move(),this.draw(),this.takeDamage()},b.prototype.getAnimation=function(){return new i(this.x,this.y)},b}(g),m=function(a){function b(a,b){this.x=a,this.y=b,this.angle=0,this.moveState=0,this.health=1}return bb(b,a),b.prototype.rand=.02,b.prototype.threshold=15,b.prototype.width=20,b.prototype.height=20,b.prototype.move=function(){var a;switch(this.moveState){case 0:return Math.abs(this.x-Y.x)<150&&Math.abs(this.y-Y.y)<150?this.moveState=1:(this.angle=0,this.y+=1);case 1:return this.y>Y.y?a=Math.PI-Math.atan((this.x-Y.x)/(this.y-Y.y)):a=-Math.atan((this.x-Y.x)/(this.y-Y.y)),Math.abs(a-this.angle)<Math.PI/24||Math.abs(a-this.angle)>Math.PI*2-Math.PI/24?(this.angle=a,this.moveState=2):this.angle<a&&this.angle-a<Math.PI||Math.PI*2-this.angle-a<Math.PI?this.angle+=Math.PI/24:this.angle-=Math.PI/24;case 2:return this.x+=30*Math.cos(this.angle+Math.PI/2),this.y+=30*Math.sin(this.angle+Math.PI/2)}},b.prototype.draw=function(){return E.strokeStyle="#FFFFFF",E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(-this.width/2,-this.height/2),E.lineTo(this.width/2,-this.height/2),E.lineTo(this.width/2,this.height/5),E.lineTo(0,this.height/2),E.lineTo(-this.width/2,this.height/5),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>C.height||this.moveState&&this.offscreen())return this.health=0;if(this.boxHit(Y))return M.owners.player.kills+=1,Y.damage(35),this.health=0;j=M.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,M.owners.player.kills+=1,this.health=0}k=M.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,M.owners.player.kills+=1,this.health=0}l=M.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return M.owners.player.kills+=1,this.health=0}},b.prototype.update=function(){return this.move(),this.draw(),this.takeDamage()},b.prototype.getAnimation=function(){return new n(this.x,this.y,this.angle)},b}(g),w=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return bb(b,a),b.prototype.rand=.1,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#0088FF",b.prototype.use=function(){return M.owners.player.shield=Math.min(M.owners.player.shield+200,u),M.timers.dispHealth=255},b}(r),x=function(){function a(a,b){this.x=a,this.y=b,this.laserCooldown=0,this.bombCooldown=0,this.heat=0,this.laserPower=1}return a.prototype.width=40,a.prototype.height=40,a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.move=function(){return this.x=(this.x+R.x)/2,this.y=(this.y+R.y)/2},a.prototype.drawShield=function(){return E.strokeStyle="rgb(0,".concat(Math.floor(M.timers.colorCycle/2),",",M.timers.colorCycle,")"),E.beginPath(),E.arc(this.x,this.y,Math.min(this.width,this.height),0,2*Math.PI,!1),E.stroke()},a.prototype.draw=function(){return M.owners.player.shield>0&&this.drawShield(),E.strokeStyle="#FFFFFF",E.beginPath(),E.moveTo(this.x,this.y-this.height/2),E.quadraticCurveTo(this.x+this.width/2,this.y,this.x+this.width/2,this.y+this.height/2),E.quadraticCurveTo(this.x+this.width/8,this.y+this.height/4,this.x,this.y+this.height/4),E.quadraticCurveTo(this.x-this.width/8,this.y+this.height/4,this.x-this.width/2,this.y+this.height/2),E.quadraticCurveTo(this.x-this.width/2,this.y,this.x,this.y-this.height/2),E.closePath(),E.stroke()},a.prototype.damage=function(a){M.timers.dispHealth=255,M.owners.player.shield-=a*20;if(M.owners.player.shield<0)return M.owners.player.health+=Math.floor(M.owners.player.shield/20),M.owners.player.shield=0},a.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;j=M.owners.enemies.lasers;for(d=0,g=j.length;d<g;d++)b=j[d],Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2&&(b.killedSomething=!0,this.damage(8));k=M.owners.enemies.bombs;for(e=0,h=k.length;e<h;e++)a=k[e],this.boxHit(a)&&(a.cooldown=0,this.damage(2));l=M.owners.enemies.shrapnals,m=[];for(f=0,i=l.length;f<i;f++)c=l[f],this.boxHit(c)?(c.cooldown=0,m.push(this.damage(2))):m.push(void 0);return m},a.prototype.update=function(){return this.move(),this.draw(),this.takeDamage(),M.owners.player.shield=Math.max(M.owners.player.shield-1,0)},a}(),d=function(a){function b(a,b){this.x=a,this.y=b,this.angle=0,this.bombCooldown=Math.floor(Math.random()*this.cooldownTime),this.turnVel=(Math.random()-.5)/30,this.health=1}return bb(b,a),b.prototype.rand=.01,b.prototype.threshold=30,b.prototype.width=10,b.prototype.height=28,b.prototype.cooldownTime=40,b.prototype.move=function(){return this.x+=2*Math.cos(this.angle+Math.PI/2),this.y+=2*Math.sin(this.angle+Math.PI/2),this.angle+=this.turnVel,this.goneOnScreen=0},b.prototype.draw=function(){return E.strokeStyle="#FFFFFF",E.translate(this.x,this.y),E.rotate(this.angle),E.beginPath(),E.moveTo(0,this.height/2),E.lineTo(this.width/2,0),E.lineTo(0,-this.height/2),E.lineTo(-this.width/2,0),E.closePath(),E.stroke(),E.rotate(-this.angle),E.translate(-this.x,-this.y)},b.prototype.bomb=function(){return this.bombCooldown=this.cooldownTime,M.owners.enemies.bombs.push(new c(this.x,this.y,4,35,M.owners.enemies))},b.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.offscreen()){if(this.goneOnScreen)return this.health=0}else this.goneOnScreen=1;if(this.boxHit(Y))return Y.damage(24),M.owners.player.kills+=1,this.health=0;j=M.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,M.owners.player.kills+=1,this.health=0}k=M.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,M.owners.player.kills+=1,this.health=0}l=M.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return M.owners.player.kills+=1,this.health=0}},b.prototype.update=function(){return this.bombCooldown===0&&this.bomb(),this.bombCooldown-=1,this.move(),this.draw(),this.takeDamage()},b.prototype.getAnimation=function(){return new e(this.x,this.y,this.angle)},b}(g),l=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return bb(b,a),b.prototype.rand=.05,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#00FF00",b.prototype.use=function(){return M.owners.player.health=Math.min(M.owners.player.health+15,t),M.timers.dispHealth=255},b}(r),c=function(a){function b(a,b,c,d,e){this.x=a,this.y=b,this.speed=c,this.cooldown=d,this.owner=e}return bb(b,a),b.prototype.width=4,b.prototype.height=4,b.prototype.speed=12,b.prototype.move=function(){return this.y+=this.speed},b.prototype.explode=function(){var a;return this.owner.shrapnals=this.owner.shrapnals.concat(function(){var b,c;c=[];for(a=b=0;b<=9;a=++b)c.push(new y(this.x,this.y,a*36*Math.PI/180,y.prototype.speed,this.owner));return c}.call(this))},b.prototype.draw=function(){return E.fillStyle=this.owner.color,this.drawAsBox()},b.prototype.update=function(){return this.cooldown-=1,this.cooldown<=0&&this.explode(),this.move(),this.draw()},b}(f),C=document.getElementById("c"),E=C.getContext("2d"),B=$("<audio></audio>").attr({loop:"loop"}).append($("<source></source>").attr({src:"media/tonight_full.ogg"}).attr({type:"audio/ogg"})).append($("<source></source>").attr({src:"media/tonight_full.mp3"}).attr({type:"audio/mpeg"})).appendTo("body")[0];if(!E)throw"Loading context failed";V=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},J=function(a,b){return setInterval(b,a)},T=function(a,b){var c,d,e,f,g;b==null&&(b=function(a){return a}),e=[],d=[];for(f=0,g=a.length;f<g;f++)c=a[f],(b(c)?e:d).push(c);return[e,d]},M=void 0,Y=void 0,L=!0,S=!1,R={x:250,y:200,leftDown:!1,rightDown:!1},Z=void 0,N={title:"Title",gameover:"GameOver",playing:"Playing",paused:"Paused",crashed:"Crashed"},F=N.title,X=function(){return E.fillStyle="#FFFFFF",E.font="bold 20px Lucidia Console",E.textAlign="center",E.textBaseline="middle"},W=function(){return E.fillStyle="#FFFFFF",E.font="normal 18px Lucidia Console",E.textAlign="left",E.textBaseline="bottom"},D=function(){return E.fillStyle="#000000",E.fillRect(0,0,C.width,C.height)},I=function(){return D(),X(),E.fillText("Tempus [Dev]",C.width/2,C.height/2-12),E.fillText("Click to play",C.width/2,C.height/2+12),W(),E.fillText("by Jake Stothard",10,C.height-10)},H=function(){return D(),X(),E.fillText("Game Over",C.width/2,C.height/2-20),E.font="normal 18px Lucidia Console",E.fillText("Kills - "+M.owners.player.kills,C.width/2,C.height/2),E.fillText("Lasers Fired - "+M.owners.player.lasersFired,C.width/2,C.height/2+20),E.fillText("Bombs Used - "+M.owners.player.bombsFired,C.width/2,C.height/2+40)},E.strokeStyle="#FFFFFF",E.lineWidth=4,K=function(){return $("#enableMusic")[0].checked&&(B.play(),S=!0),L=!1},Q=function(){return L&&K(),Y=new x(R.x,R.y),M=new k},G=function(){return E.strokeStyle="rgba(0,255,0,".concat(M.timers.dispHealth/255,")"),E.beginPath(),E.arc(C.width/2,C.height/2,Math.min(C.width,C.height)/2-20,0,Math.max(M.owners.player.health,0)*Math.PI*2/t,!1),E.stroke(),E.strokeStyle="rgba(0,127,255,".concat(M.timers.dispHealth/255,")"),E.beginPath(),E.arc(C.width/2,C.height/2,Math.min(C.width,C.height)/2-40,0,Math.max(M.owners.player.shield,0)*Math.PI*2/u,!1),E.stroke()},U=function(){return F=N.paused,clearInterval(Z),G(),X(),E.fillText("[Paused]",C.width/2,C.height/2)},_=function(){return F=N.playing,Z=J(32,O)},$(document).keyup(function(a){switch(a.which){case 80:switch(F){case N.paused:return _();case N.playing:return U()}}}),$("#c").mousemove(function(a){return R.x=a.pageX-this.offsetLeft,R.y=a.pageY-this.offsetTop}).mouseout(function(a){if(F===N.playing)return U()}).mousedown(function(a){switch(a.which){case 1:return R.leftDown=!0;case 3:return R.rightDown=!0}}).mouseup(function(a){switch(a.which){case 1:return R.leftDown=!1;case 3:return R.rightDown=!1}}).click(function(a){switch(F){case N.paused:return _();case N.title:return F=N.playing,Q(),Z=J(32,O);case N.gameOver:return F=N.title,I()}}).bind("contextmenu",function(a){return!1}),$("#enableMusic").change(function(a){if(!L)return $("#enableMusic")[0].checked?(B.play(),S=!0):(B.pause(),S=!1)}),P=function(a){var b,c,d,e,f;e=M.owners.enemies.units,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],b.health<=0&&Math.random()<a.prototype.rand&&f.push(new a(b.x,b.y));return f},O=function(){var a,b,e,f,g,i,j,k,n,q,r,t,u,x,y,A,B,I,J,K,L,O,Q,S,U,W,X,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi;if(M.crashed){F=N.crashed,clearInterval(Z);return}M.crashed=!0,M.timers.colorCycle+=M.timers.colorCycleDir,M.timers.colorCycle=Math.min(M.timers.colorCycle,255),M.timers.colorCycle=Math.max(M.timers.colorCycle,0);if(M.timers.colorCycle===0||M.timers.colorCycle===255)M.timers.colorCycleDir*=-1;if(M.owners.player.health<=0){F=N.gameOver,clearInterval(Z),H();return}D(),_=M.owners.enemies.units;for(x=0,I=_.length;x<I;x++)f=_[x],f.update();M.powerups.healthups=M.powerups.healthups.concat(P(l)),M.powerups.shieldups=M.powerups.shieldups.concat(P(w)),M.powerups.laserups=M.powerups.laserups.concat(P(p)),ba=T(M.owners.enemies.units,function(a){return a.health>0}),M.owners.enemies.units=ba[0],e=ba[1],M.animations=M.animations.concat(function(){var a,b,c;c=[];for(a=0,b=e.length;a<b;a++)f=e[a],c.push(f.getAnimation());return c}()),M.animations=function(){var b,c,d,e;d=M.animations,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.finished()||e.push(a);return e}(),bb=[h,m,d,z];for(y=0,J=bb.length;y<J;y++)u=bb[y],M.owners.player.kills>=u.prototype.threshold&&Math.random()<u.prototype.rand&&M.owners.enemies.units.push(new u(V(0,C.width),-10));Y.update(),bc=M.owners;for(k in bc){j=bc[k],bd=j.lasers;for(A=0,K=bd.length;A<K;A++)i=bd[A],i.update();j.lasers=function(){var a,b,c,d,e;c=j.lasers,e=[];for(a=0,b=c.length;a<b;a++)i=c[a],0<(d=i.y)&&d<C.height&&!i.killedSomething&&e.push(i);return e}(),be=j.bombs;for(B=0,L=be.length;B<L;B++)b=be[B],b.update();j.bombs=function(){var a,c,d,e;d=j.bombs,e=[];for(c=0,a=d.length;c<a;c++)b=d[c],b.cooldown>0&&e.push(b);return e}(),bf=j.shrapnals;for(U=0,O=bf.length;U<O;U++)t=bf[U],t.update();j.shrapnals=function(){var a,b,c,d;c=j.shrapnals,d=[];for(b=0,a=c.length;b<a;b++)t=c[b],t.cooldown>0&&d.push(t);return d}()}bg=M.powerups;for(r in bg){q=bg[r];for(W=0,Q=q.length;W<Q;W++)n=q[W],n.update();M.powerups[r]=function(){var a,b,c;c=[];for(b=0,a=q.length;b<a;b++)n=q[b],n.used||c.push(n);return c}()}if(R.leftDown&&Y.laserCooldown<=0){M.owners.player.lasersFired+=Y.laserPower;for(g=X=1,bh=Y.laserPower;1<=bh?X<=bh:X>=bh;g=1<=bh?++X:--X)M.owners.player.lasers.push(new o(Y.x+g*4-Y.laserPower*2,Y.y,-o.prototype.speed,M.owners.player));Y.heat>s?Y.laserCooldown=7:Y.heat>v?Y.laserCooldown=5:Y.laserCooldown=2,Y.heat+=7}R.rightDown&&Y.bombCooldown<=0&&(M.owners.player.bombsFired+=1,F===N.playing&&M.owners.player.bombs.push(new c(Y.x,Y.y,-c.prototype.speed,20,M.owners.player)),Y.heat>s?Y.bombCooldown=20:Y.heat>v?Y.bombCooldown=10:Y.bombCooldown=5,Y.heat+=10),Y.laserCooldown>0&&(Y.laserCooldown-=1),Y.bombCooldown>0&&(Y.bombCooldown-=1),Y.heat>0&&(Y.heat-=1),bi=M.animations;for($=0,S=bi.length;$<S;$++)a=bi[$],a.drawFrame(),a.nextFrame();return E.textAlign="center",E.textBaseline="bottom",Y.heat>s?(E.fillStyle="rgb(".concat(M.timers.colorCycle,",0,0)"),E.font="bold 20px Lucidia Console",E.fillText("[ Heat Critical ]",C.width/2,C.height-30)):Y.heat>v&&(E.fillStyle="rgb(".concat(M.timers.colorCycle,",",M.timers.colorCycle,",0)"),E.font="normal 18px Lucidia Console",E.fillText("[ Heat Warning ]",C.width/2,C.height-30)),M.timers.dispHealth>0&&(G(),E.strokeStyle="#FFFFFF",M.timers.dispHealth-=10),M.crashed=!1};switch(F){case N.playing:Q(),Z=J(32,O);break;case N.title:I()}}.call(this)