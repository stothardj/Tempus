var __t;__t=function(ns){var curr,index,part,parts,_i,_len;curr=null,parts=[].concat=ns.split(".");for(index=_i=0,_len=parts.length;_i<_len;index=++_i){part=parts[index];if(curr===null){curr=eval(part);continue}curr[part]==null?curr=curr[part]={}:curr=curr[part]}return curr},function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S={}.hasOwnProperty,T=function(a,b){function d(){this.constructor=a}for(var c in b)S.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=function(){function a(a,b){this.x=a,this.y=b}return a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.offscreen=function(){return this.x<0||this.x>u.width||this.y<0||this.y>u.height},a.prototype.drawAsBox=function(){return w.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a}(),m=function(a){function b(a,b){this.x=a,this.y=b,this.used=0}return T(b,a),b.prototype.move=function(){return this.y+=this.speed},b.prototype.draw=function(){return w.fillStyle=this.color,this.drawAsBox()},b.prototype.detectUse=function(){this.boxHit(P)&&(this.used=1,this.use());if(this.offscreen())return this.used=1},b.prototype.update=function(){return this.move(),this.draw(),this.detectUse()},b}(d),f="#0044FF",a="#FF0000",n=100,o=4e3,l=3,p=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return T(b,a),b.prototype.rand=.1,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#0088FF",b.prototype.use=function(){return E.owners.player.shield=Math.min(E.owners.player.shield+200,o),E.timers.dispHealth=255},b}(m),q=function(){function a(a,b){this.x=a,this.y=b,this.laserCooldown=0,this.bombCooldown=0,this.heat=0,this.laserPower=1}return a.prototype.width=40,a.prototype.height=40,a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.move=function(){return this.x=(this.x+J.x)/2,this.y=(this.y+J.y)/2},a.prototype.drawShield=function(){return w.strokeStyle="rgb(0,".concat(Math.floor(E.timers.colorCycle/2),",",E.timers.colorCycle,")"),w.beginPath(),w.arc(this.x,this.y,Math.min(this.width,this.height),0,2*Math.PI,!1),w.stroke()},a.prototype.draw=function(){return E.owners.player.shield>0&&this.drawShield(),w.strokeStyle="#FFFFFF",w.beginPath(),w.moveTo(this.x,this.y-this.height/2),w.quadraticCurveTo(this.x+this.width/2,this.y,this.x+this.width/2,this.y+this.height/2),w.quadraticCurveTo(this.x+this.width/8,this.y+this.height/4,this.x,this.y+this.height/4),w.quadraticCurveTo(this.x-this.width/8,this.y+this.height/4,this.x-this.width/2,this.y+this.height/2),w.quadraticCurveTo(this.x-this.width/2,this.y,this.x,this.y-this.height/2),w.closePath(),w.stroke()},a.prototype.damage=function(a){E.timers.dispHealth=255,E.owners.player.shield-=a*20;if(E.owners.player.shield<0)return E.owners.player.health+=Math.floor(E.owners.player.shield/20),E.owners.player.shield=0},a.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;j=E.owners.enemies.lasers;for(d=0,g=j.length;d<g;d++)b=j[d],Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2&&(b.killedSomething=!0,this.damage(8));k=E.owners.enemies.bombs;for(e=0,h=k.length;e<h;e++)a=k[e],this.boxHit(a)&&(a.cooldown=0,this.damage(2));l=E.owners.enemies.shrapnals,m=[];for(f=0,i=l.length;f<i;f++)c=l[f],this.boxHit(c)?(c.cooldown=0,m.push(this.damage(2))):m.push(void 0);return m},a.prototype.update=function(){return this.move(),this.draw(),this.takeDamage(),E.owners.player.shield=Math.max(E.owners.player.shield-1,0)},a}(),c=function(a){function c(a,b){this.x=a,this.y=b,this.angle=0,this.bombCooldown=Math.floor(Math.random()*this.cooldownTime),this.turnVel=(Math.random()-.5)/30,this.health=1}return T(c,a),c.prototype.rand=.01,c.prototype.threshold=30,c.prototype.width=10,c.prototype.height=28,c.prototype.cooldownTime=40,c.prototype.move=function(){return this.x+=2*Math.cos(this.angle+Math.PI/2),this.y+=2*Math.sin(this.angle+Math.PI/2),this.angle+=this.turnVel,this.goneOnScreen=0},c.prototype.draw=function(){return w.translate(this.x,this.y),w.rotate(this.angle),w.beginPath(),w.moveTo(0,this.height/2),w.lineTo(this.width/2,0),w.lineTo(0,-this.height/2),w.lineTo(-this.width/2,0),w.closePath(),w.stroke(),w.rotate(-this.angle),w.translate(-this.x,-this.y)},c.prototype.bomb=function(){return this.bombCooldown=this.cooldownTime,E.owners.enemies.bombs.push(new b(this.x,this.y,4,35,E.owners.enemies))},c.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.offscreen()){if(this.goneOnScreen)return this.health=0}else this.goneOnScreen=1;if(this.boxHit(P))return P.damage(24),E.owners.player.kills+=1,this.health=0;j=E.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,E.owners.player.kills+=1,this.health=0}k=E.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,E.owners.player.kills+=1,this.health=0}l=E.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return E.owners.player.kills+=1,this.health=0}},c.prototype.update=function(){return this.bombCooldown===0&&this.bomb(),this.bombCooldown-=1,this.move(),this.draw(),this.takeDamage()},c}(d),i=function(a){function b(a,b){this.x=a,this.y=b,this.angle=0,this.moveState=0,this.health=1}return T(b,a),b.prototype.rand=.02,b.prototype.threshold=15,b.prototype.width=20,b.prototype.height=20,b.prototype.move=function(){var a;switch(this.moveState){case 0:return Math.abs(this.x-P.x)<150&&Math.abs(this.y-P.y)<150?this.moveState=1:(this.angle=0,this.y+=1);case 1:return this.y>P.y?a=Math.PI-Math.atan((this.x-P.x)/(this.y-P.y)):a=-Math.atan((this.x-P.x)/(this.y-P.y)),Math.abs(a-this.angle)<Math.PI/24||Math.abs(a-this.angle)>Math.PI*2-Math.PI/24?(this.angle=a,this.moveState=2):this.angle<a&&this.angle-a<Math.PI||Math.PI*2-this.angle-a<Math.PI?this.angle+=Math.PI/24:this.angle-=Math.PI/24;case 2:return this.x+=30*Math.cos(this.angle+Math.PI/2),this.y+=30*Math.sin(this.angle+Math.PI/2)}},b.prototype.draw=function(){return w.translate(this.x,this.y),w.rotate(this.angle),w.beginPath(),w.moveTo(-this.width/2,-this.height/2),w.lineTo(this.width/2,-this.height/2),w.lineTo(this.width/2,this.height/5),w.lineTo(0,this.height/2),w.lineTo(-this.width/2,this.height/5),w.closePath(),w.stroke(),w.rotate(-this.angle),w.translate(-this.x,-this.y)},b.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>u.height||this.moveState&&this.offscreen())return this.health=0;if(this.boxHit(P))return E.owners.player.kills+=1,P.damage(35),this.health=0;j=E.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,E.owners.player.kills+=1,this.health=0}k=E.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,E.owners.player.kills+=1,this.health=0}l=E.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return E.owners.player.kills+=1,this.health=0}},b.prototype.update=function(){return this.move(),this.draw(),this.takeDamage()},b}(d),k=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return T(b,a),b.prototype.rand=.02,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#FF9900",b.prototype.use=function(){return P.laserPower+=1},b}(m),r=function(){function a(a,b,c,d,e){this.x=a,this.y=b,this.angle=c,this.speed=d,this.owner=e,this.cooldown=10}return a.prototype.speed=10,a.prototype.width=2,a.prototype.height=2,a.prototype.drawAsBox=function(){return w.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a.prototype.move=function(){return this.x+=this.speed*Math.cos(this.angle),this.y+=this.speed*Math.sin(this.angle)},a.prototype.draw=function(){return w.fillStyle=this.owner.color,this.drawAsBox()},a.prototype.update=function(){return this.cooldown-=1,this.move(),this.draw()},a}(),e=function(){function a(a,b){this.x=a,this.y=b,this.shootCooldown=Math.floor(Math.random()*this.cooldownTime),this.health=1}return a.prototype.rand=.03,a.prototype.threshold=0,a.prototype.width=20,a.prototype.height=20,a.prototype.cooldownTime=35,a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.draw=function(){return w.strokeStyle="#FFFFFF",w.beginPath(),w.moveTo(this.x-this.width/2,this.y-this.height/2),w.lineTo(this.x+this.width/2,this.y-this.height/2),w.lineTo(this.x,this.y+this.height/2),w.closePath(),w.stroke()},a.prototype.move=function(){var a;return this.y+=3,a=(P.x-this.x)/12,this.x+=Math.abs(a)<5?a:5*a/Math.abs(a)},a.prototype.shoot=function(){return this.shootCooldown=this.cooldownTime,E.owners.enemies.lasers.push(new j(this.x,this.y,j.prototype.speed,E.owners.enemies))},a.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>u.height)return this.health=0;if(this.boxHit(P))return P.damage(24),E.owners.player.kills+=1,this.health=0;j=E.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,E.owners.player.kills+=1,this.health=0}k=E.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,E.owners.player.kills+=1,this.health=0}l=E.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return E.owners.player.kills+=1,this.health=0}},a.prototype.update=function(){return this.shootCooldown===0&&this.shoot(),this.shootCooldown-=1,this.move(),this.draw(),this.takeDamage()},a}(),j=function(){function a(a,b,c,d){this.x=a,this.y=b,this.speed=c,this.owner=d,this.killedSomething=!1}return a.prototype.speed=20,a.prototype.width=2,a.prototype.height=16,a.prototype.drawAsBox=function(){return w.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height)},a.prototype.draw=function(){return w.fillStyle=this.owner.color,this.drawAsBox()},a.prototype.move=function(){return this.y+=this.speed},a.prototype.update=function(){return this.move(),this.draw()},a}(),s=function(){function a(a,b){this.x=a,this.y=b,this.angle=0,this.shootCooldown=Math.floor(Math.random()*this.cooldownTime),this.burst=0,this.health=1}return a.prototype.rand=.005,a.prototype.threshold=45,a.prototype.width=20,a.prototype.height=20,a.prototype.cooldownTime=55,a.prototype.boxHit=function(a){return Math.abs(a.x-this.x)<(a.width+this.width)/2&&Math.abs(a.y-this.y)<(a.height+this.height)/2},a.prototype.draw=function(){return w.translate(this.x,this.y),w.rotate(this.angle),w.beginPath(),w.moveTo(-this.width/2,-this.height/2),w.lineTo(this.width/2,-this.height/2),w.lineTo(this.width/2,this.height/2),w.lineTo(-this.width/2,this.height/2),w.closePath(),w.stroke(),w.rotate(-this.angle),w.translate(-this.x,-this.y)},a.prototype.move=function(){return this.angle+=.1,this.y+=2},a.prototype.shoot=function(){return this.burst<5?this.burst+=1:(this.shootCooldown=this.cooldownTime,this.burst=0),E.owners.enemies.lasers.push(new j(this.x,this.y,j.prototype.speed,E.owners.enemies))},a.prototype.takeDamage=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(this.y>u.height)return this.health=0;if(this.boxHit(P))return P.damage(24),E.owners.player.kills+=1,this.health=0;j=E.owners.player.lasers;for(d=0,g=j.length;d<g;d++){b=j[d];if(Math.abs(this.x-b.x)<=this.width/2&&Math.abs(this.y-b.y+b.speed/2)<=(Math.abs(b.speed)+b.height)/2+this.height/2)return b.killedSomething=!0,E.owners.player.kills+=1,this.health=0}k=E.owners.player.bombs;for(e=0,h=k.length;e<h;e++){a=k[e];if(this.boxHit(a))return a.cooldown=0,E.owners.player.kills+=1,this.health=0}l=E.owners.player.shrapnals;for(f=0,i=l.length;f<i;f++){c=l[f];if(this.boxHit(c))return E.owners.player.kills+=1,this.health=0}},a.prototype.update=function(){return this.shootCooldown<=0&&this.shoot(),this.shootCooldown-=1,this.move(),this.draw(),this.takeDamage()},a}(),g=function(){function b(){this.owners={player:{lasers:[],bombs:[],shrapnals:[],units:P,color:f,health:n,shield:0,kills:0,lasersFired:0,bombsFired:0},enemies:{lasers:[],bombs:[],shrapnals:[],units:[],color:a}},this.timers={dispHealth:0,colorCycle:0,colorCycleDir:10},this.powerups={healthups:[],laserups:[],shieldups:[]},this.crashed=!1}return b}(),h=function(a){function b(a,c){this.x=a,this.y=c,b.__super__.constructor.call(this,this.x,this.y)}return T(b,a),b.prototype.rand=.05,b.prototype.width=4,b.prototype.height=4,b.prototype.speed=5,b.prototype.color="#00FF00",b.prototype.use=function(){return E.owners.player.health=Math.min(E.owners.player.health+15,n),E.timers.dispHealth=255},b}(m),b=function(a){function b(a,b,c,d,e){this.x=a,this.y=b,this.speed=c,this.cooldown=d,this.owner=e}return T(b,a),b.prototype.width=4,b.prototype.height=4,b.prototype.speed=12,b.prototype.move=function(){return this.y+=this.speed},b.prototype.explode=function(){var a;return this.owner.shrapnals=this.owner.shrapnals.concat(function(){var b,c;c=[];for(a=b=0;b<=9;a=++b)c.push(new r(this.x,this.y,a*36*Math.PI/180,r.prototype.speed,this.owner));return c}.call(this))},b.prototype.draw=function(){return w.fillStyle=this.owner.color,this.drawAsBox()},b.prototype.update=function(){return this.cooldown-=1,this.cooldown<=0&&this.explode(),this.move(),this.draw()},b}(d),H=function(a){if(E.owners.player.kills>=a.prototype.threshold&&Math.random()<a.prototype.rand)return E.owners.enemies.units.push(new a(M(0,u.width),-10))},u=document.getElementById("c"),w=u.getContext("2d"),t=$("<audio></audio>").attr({loop:"loop"}).append($("<source></source>").attr({src:"media/tonight_full.ogg"}).attr({type:"audio/ogg"})).append($("<source></source>").attr({src:"media/tonight_full.mp3"}).attr({type:"audio/mpeg"})).appendTo("body")[0],console.log(t);if(!w)throw"Loading context failed";M=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},B=function(a,b){return setInterval(b,a)},E=void 0,P=void 0,D=!0,K=!1,J={x:250,y:200,leftDown:!1,rightDown:!1},Q=void 0,F={title:"Title",gameover:"GameOver",playing:"Playing",paused:"Paused",crashed:"Crashed"},x=F.title,O=function(){return w.fillStyle="#FFFFFF",w.font="bold 20px Lucidia Console",w.textAlign="center",w.textBaseline="middle"},N=function(){return w.fillStyle="#FFFFFF",w.font="normal 18px Lucidia Console",w.textAlign="left",w.textBaseline="bottom"},v=function(){return w.fillStyle="#000000",w.fillRect(0,0,u.width,u.height)},A=function(){return v(),O(),w.fillText("Tempus [Dev]",u.width/2,u.height/2-12),w.fillText("Click to play",u.width/2,u.height/2+12),N(),w.fillText("by Jake Stothard",10,u.height-10)},z=function(){return v(),O(),w.fillText("Game Over",u.width/2,u.height/2-20),w.font="normal 18px Lucidia Console",w.fillText("Kills - "+E.owners.player.kills,u.width/2,u.height/2),w.fillText("Lasers Fired - "+E.owners.player.lasersFired,u.width/2,u.height/2+20),w.fillText("Bombs Used - "+E.owners.player.bombsFired,u.width/2,u.height/2+40)},w.strokeStyle="#FFFFFF",w.lineWidth=4,C=function(){return $("#enableMusic")[0].checked&&(t.play(),K=!0),D=!1},I=function(){return D&&C(),P=new q(J.x,J.y),E=new g},y=function(){return w.strokeStyle="rgb(0,".concat(E.timers.dispHealth,",0)"),w.beginPath(),w.arc(u.width/2,u.height/2,Math.min(u.width,u.height)/2-20,0,Math.max(E.owners.player.health,0)*Math.PI*2/n,!1),w.stroke(),w.strokeStyle="rgb(0,".concat(Math.floor(E.timers.dispHealth/2),",",E.timers.dispHealth,")"),w.beginPath(),w.arc(u.width/2,u.height/2,Math.min(u.width,u.height)/2-40,0,Math.max(E.owners.player.shield,0)*Math.PI*2/o,!1),w.stroke()},L=function(){return x=F.paused,clearInterval(Q),y(),O(),w.fillText("[Paused]",u.width/2,u.height/2)},R=function(){return x=F.playing,Q=B(32,G)},$(document).keyup(function(a){switch(a.which){case 80:switch(x){case F.paused:return R();case F.playing:return L()}}}),$("#c").mousemove(function(a){return J.x=a.pageX-this.offsetLeft,J.y=a.pageY-this.offsetTop}).mouseout(function(a){if(x===F.playing)return L()}).mousedown(function(a){switch(a.which){case 1:return J.leftDown=!0;case 3:return J.rightDown=!0}}).mouseup(function(a){switch(a.which){case 1:return J.leftDown=!1;case 3:return J.rightDown=!1}}).click(function(a){switch(x){case F.paused:return R();case F.title:return x=F.playing,I(),Q=B(32,G);case F.gameOver:return x=F.title,A()}}).bind("contextmenu",function(a){return!1}),$("#enableMusic").change(function(a){if(!D)return $("#enableMusic")[0].checked?(t.play(),K=!0):(t.pause(),K=!1)}),G=function(){var a,d,f,g,l,m,n,o,q,r,t,A,B,C,D,G,I,K,L,M,N,O,R,S,T,U,V,W;if(E.crashed){x=F.crashed,clearInterval(Q);return}E.crashed=!0,E.timers.colorCycle+=E.timers.colorCycleDir,E.timers.colorCycle=Math.min(E.timers.colorCycle,255),E.timers.colorCycle=Math.max(E.timers.colorCycle,0);if(E.timers.colorCycle===0||E.timers.colorCycle===255)E.timers.colorCycleDir*=-1;if(E.owners.player.health<=0){x=F.gameOver,clearInterval(Q),z();return}v(),O=E.owners.enemies.units;for(t=0,D=O.length;t<D;t++)d=O[t],d.update();E.powerups.healthups=E.powerups.healthups.concat(function(){var a,b,c,e;c=E.owners.enemies.units,e=[];for(a=0,b=c.length;a<b;a++)d=c[a],d.health<=0&&Math.random()<h.prototype.rand&&e.push(new h(d.x,d.y));return e}()),E.powerups.shieldups=E.powerups.shieldups.concat(function(){var a,b,c,e;c=E.owners.enemies.units,e=[];for(a=0,b=c.length;a<b;a++)d=c[a],d.health<=0&&Math.random()<p.prototype.rand&&e.push(new p(d.x,d.y));return e}()),E.powerups.laserups=E.powerups.laserups.concat(function(){var a,b,c,e;c=E.owners.enemies.units,e=[];for(a=0,b=c.length;a<b;a++)d=c[a],d.health<=0&&Math.random()<k.prototype.rand&&e.push(new k(d.x,d.y));return e}()),E.owners.enemies.units=function(){var a,b,c,e;c=E.owners.enemies.units,e=[];for(a=0,b=c.length;a<b;a++)d=c[a],d.health>0&&e.push(d);return e}(),H(e),H(i),H(c),H(s),P.update(),R=E.owners;for(m in R){l=R[m],S=l.lasers;for(A=0,G=S.length;A<G;A++)g=S[A],g.update();l.lasers=function(){var a,b,c,d,e;c=l.lasers,e=[];for(a=0,b=c.length;a<b;a++)g=c[a],0<(d=g.y)&&d<u.height&&!g.killedSomething&&e.push(g);return e}(),T=l.bombs;for(B=0,I=T.length;B<I;B++)a=T[B],a.update();l.bombs=function(){var b,c,d,e;d=l.bombs,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.cooldown>0&&e.push(a);return e}(),U=l.shrapnals;for(C=0,K=U.length;C<K;C++)r=U[C],r.update();l.shrapnals=function(){var a,b,c,d;c=l.shrapnals,d=[];for(b=0,a=c.length;b<a;b++)r=c[b],r.cooldown>0&&d.push(r);return d}()}V=E.powerups;for(q in V){o=V[q];for(M=0,L=o.length;M<L;M++)n=o[M],n.update();E.powerups[q]=function(){var a,b,c;c=[];for(b=0,a=o.length;b<a;b++)n=o[b],n.used||c.push(n);return c}()}if(J.leftDown&&P.laserCooldown<=0){E.owners.player.lasersFired+=P.laserPower;for(f=N=1,W=P.laserPower;1<=W?N<=W:N>=W;f=1<=W?++N:--N)E.owners.player.lasers.push(new j(P.x+f*4-P.laserPower*2,P.y,-j.prototype.speed,E.owners.player));P.heat>80?P.laserCooldown=7:P.heat>40?P.laserCooldown=5:P.laserCooldown=2,P.heat+=7}return J.rightDown&&P.bombCooldown<=0&&(E.owners.player.bombsFired+=1,x===F.playing&&E.owners.player.bombs.push(new b(P.x,P.y,-b.prototype.speed,20,E.owners.player)),P.heat>80?P.bombCooldown=20:P.heat>40?P.bombCooldown=10:P.bombCooldown=5,P.heat+=10),P.laserCooldown>0&&(P.laserCooldown-=1),P.bombCooldown>0&&(P.bombCooldown-=1),P.heat>0&&(P.heat-=1),w.textAlign="center",w.textBaseline="bottom",P.heat>80?(w.fillStyle="rgb(".concat(E.timers.colorCycle,",0,0)"),w.font="bold 20px Lucidia Console",w.fillText("[ Heat Critical ]",u.width/2,u.height-30)):P.heat>40&&(w.fillStyle="rgb(".concat(E.timers.colorCycle,",",E.timers.colorCycle,",0)"),w.font="normal 18px Lucidia Console",w.fillText("[ Heat Warning ]",u.width/2,u.height-30)),E.timers.dispHealth>0&&(y(),w.strokeStyle="#FFFFFF",E.timers.dispHealth-=10),E.crashed=!1};switch(x){case F.playing:I(),Q=B(32,G);break;case F.title:A()}}.call(this)